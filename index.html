
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Bash-my-AWS is a simple but powerful set of CLI commands for managing resources on Amazon Web Services.">
      
      
        <meta name="author" content="Mike Bailey">
      
      
        <link rel="canonical" href="https://bash-my-aws.org/">
      
      
      
        <link rel="next" href="command-reference/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.2.3">
    
    
      
        <title>Bash-my-AWS - CLI Commands for AWS - Bash-my-AWS</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.0e669242.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Bash-my-AWS" class="md-header__button md-logo" aria-label="Bash-my-AWS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Bash-my-AWS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Bash-my-AWS - CLI Commands for AWS
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/bash-my-aws/bash-my-aws" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    bash-my-aws/bash-my-aws
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Bash-my-AWS" class="md-nav__button md-logo" aria-label="Bash-my-AWS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Bash-my-AWS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bash-my-aws/bash-my-aws" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    bash-my-aws/bash-my-aws
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Home
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#short-memorable-commands" class="md-nav__link">
    Short, Memorable Commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shell-command-completion" class="md-nav__link">
    Shell Command Completion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unix-pipeline-friendly" class="md-nav__link">
    Unix Pipeline Friendly
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convenient-shortcuts" class="md-nav__link">
    Convenient Shortcuts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    Quickstart
  </a>
  
    <nav class="md-nav" aria-label="Quickstart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-commands" class="md-nav__link">
    Running Commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discovering-commands" class="md-nav__link">
    Discovering Commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#piping-between-commands" class="md-nav__link">
    Piping Between Commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inspecting-commands" class="md-nav__link">
    Inspecting Commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="command-reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command Reference
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="cachews-caching-for-awscli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cachews (zeroconf caching)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="pipe-skimming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pipe-Skimming
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="cloudformation-naming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CloudFormation Naming
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="linuxconf2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LCA 2020 Video
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#short-memorable-commands" class="md-nav__link">
    Short, Memorable Commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shell-command-completion" class="md-nav__link">
    Shell Command Completion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unix-pipeline-friendly" class="md-nav__link">
    Unix Pipeline Friendly
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convenient-shortcuts" class="md-nav__link">
    Convenient Shortcuts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    Quickstart
  </a>
  
    <nav class="md-nav" aria-label="Quickstart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-commands" class="md-nav__link">
    Running Commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discovering-commands" class="md-nav__link">
    Discovering Commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#piping-between-commands" class="md-nav__link">
    Piping Between Commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inspecting-commands" class="md-nav__link">
    Inspecting Commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Home</h1>

<p>Bash-my-AWS is a simple but powerful set of CLI commands for managing
resources on Amazon Web Services.</p>
<p>They harness the power of Amazon's AWSCLI, while abstracting away verbosity.</p>
<p>The project implements some innovative patterns but (arguably) remains simple,
beautiful and readable.</p>
<p><strong><a href="https://github.com/bash-my-aws/bash-my-aws/">github.com/bash-my-aws/bash-my-aws</a></strong></p>
<p><img alt="screencast" src="images/bma-02-2.gif" /></p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#short-memorable-commands">Short, Memorable Commands</a></li>
<li><a href="#shell-command-completion">Shell Command Completion (including AWS resources)</a></li>
<li><a href="#unix-pipeline-friendly">Unix Pipeline Friendly (instead of JSON)</a></li>
<li><a href="#convenient-shortcuts">Convenient Shortcuts</a></li>
</ul>
<h3 id="short-memorable-commands">Short, Memorable Commands<a class="headerlink" href="#short-memorable-commands" title="Permanent link">&para;</a></h3>
<p>There are two main types of commands.</p>
<p><strong>1. Resource Listing Commands</strong></p>
<p>These generally consist of the pluralised form of the resource name.</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>buckets
example-assets<span class="w">   </span><span class="m">2019</span>-12-08<span class="w">  </span><span class="m">02</span>:35:44.758551
example-logs<span class="w">     </span><span class="m">2019</span>-12-08<span class="w">  </span><span class="m">02</span>:35:52.669771
example-backups<span class="w">  </span><span class="m">2019</span>-12-08<span class="w">  </span><span class="m">02</span>:35:56.579434
</code></pre></div>

<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>stacks
nagios<span class="w">      </span>CREATE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
postgres01<span class="w">  </span>CREATE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
postgres02<span class="w">  </span>CREATE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
prometheus<span class="w">  </span>CREATE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
</code></pre></div>

<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>keypairs
alice<span class="w">  </span>8f:85:9a:1e:6c:76:29:34:37:45:de:7f:8d:f9:70:eb
bob<span class="w">    </span><span class="m">56</span>:73:29:c2:ad:7b:6f:b6:f2:f3:b4:de:e4:2b:12:d4
carol<span class="w">  </span><span class="m">29</span>:4e:1c:cb:ba:d4:85:0e:4f:b6:34:4c:d4:79:32:00
</code></pre></div>

<p><strong>2. Resource detail/action commands</strong></p>
<p>These generally consist of a resource name and action separated by a hyphen.
This makes discovering them via shell completion simple.</p>
<p>Some retrieve information about resources while others make changes to them.</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>keypair-delete<span class="w"> </span>alice<span class="w"> </span>bob
You<span class="w"> </span>are<span class="w"> </span>about<span class="w"> </span>to<span class="w"> </span>delete<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>EC2<span class="w"> </span>SSH<span class="w"> </span>KeyPairs:
alice
bob
Are<span class="w"> </span>you<span class="w"> </span>sure<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span><span class="k">continue</span>?<span class="w"> </span>y
</code></pre></div>

<p>See the <a href="command-reference/">Command Reference</a> for a full list of commands.</p>
<h3 id="shell-command-completion">Shell Command Completion<a class="headerlink" href="#shell-command-completion" title="Permanent link">&para;</a></h3>
<p>In the example above, shell autocompletion retrieved the existing EC2 Keypair
names (<code>alice</code>, <code>bob</code>) from AWS. This helps avoid the need to rely on human
memory or terminal copypasta.</p>
<p>Additionally, all of the bash-my-aws commands are available as completions
for the <code>bma</code> command. This means you can <code>bma[tab][tab]</code> to get a listing
of all the commands.</p>
<h3 id="unix-pipeline-friendly">Unix Pipeline Friendly<a class="headerlink" href="#unix-pipeline-friendly" title="Permanent link">&para;</a></h3>
<p>The commands themselves are line oriented and work nicely in unix pipelines
with other unix commands (e.g. <code>grep</code>, <code>awk</code>, etc).</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>stacks<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>postgres
postgres01<span class="w">  </span>CREATE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
postgres02<span class="w">  </span>CREATE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
</code></pre></div>

<p>They also work incredibly well with each other due to the way they treat input
from STDIN. The first token from each line of STDIN is taken to be a resource
identifiers (and the rest is discarded).</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>stacks<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>postgres<span class="w"> </span><span class="p">|</span><span class="w"> </span>stack-delete
You<span class="w"> </span>are<span class="w"> </span>about<span class="w"> </span>to<span class="w"> </span>delete<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>stacks:
postgres01
postgres02
Are<span class="w"> </span>you<span class="w"> </span>sure<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span><span class="k">continue</span>?<span class="w"> </span>y
</code></pre></div>

<p><em>Some users have compared this User Experience to functionality in Windows Powershell.</em></p>
<h3 id="convenient-shortcuts">Convenient Shortcuts<a class="headerlink" href="#convenient-shortcuts" title="Permanent link">&para;</a></h3>
<p>Bash-my-AWS is insanely simple to pick up and start using but contains a lot of
convenient shortcuts you can make use of.</p>
<p>Example: resource listing commands accept a filter argument, removing the need
for <code>| grep</code>.</p>
<p>In the following example someone has given a CloudFormation stack a really long name:</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>stacks
nagios<span class="w">                             </span>CREATE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
postgres01<span class="w">                         </span>DELETE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
postgres02<span class="w">                         </span>DELETE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
prometheus<span class="w">                         </span>CREATE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
stack-with-a-annoyingly-long-name<span class="w">  </span>CREATE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
</code></pre></div>

<p>This affects the output when we look at our Postgres stacks:</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>stacks<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>postgres
postgres01<span class="w">                         </span>DELETE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
postgres02<span class="w">                         </span>DELETE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
</code></pre></div>

<p>The resource listing command can filter output before applying <code>column</code>.</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>stacks<span class="w"> </span>postgres
postgres01<span class="w">  </span>DELETE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
postgres02<span class="w">  </span>DELETE_COMPLETE<span class="w">  </span><span class="m">2011</span>-05-23T15:47:44Z<span class="w">  </span>NEVER_UPDATED<span class="w">  </span>NOT_NESTED
</code></pre></div>

<h2 id="quickstart">Quickstart<a class="headerlink" href="#quickstart" title="Permanent link">&para;</a></h2>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="http://aws.amazon.com/cli/">awscli</a></li>
<li><a href="https://www.gnu.org/software/bash/">bash</a></li>
<li><a href="http://stedolan.github.io/jq/download/">jq-1.4</a> or later (for stack-diff)</li>
</ul>
<h3 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h3>
<p>As shown below, you may simply clone the GitHub repo and source the files required.
(You should probably fork it instead to keep your customisations)</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/bash-my-aws/bash-my-aws.git<span class="w"> </span><span class="si">${</span><span class="nv">BMA_HOME</span><span class="k">:-</span><span class="nv">$HOME</span><span class="p">/.bash-my-aws</span><span class="si">}</span>
</code></pre></div>

<p>Put the following in your shell's startup file:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">:</span><span class="si">${</span><span class="nv">BMA_HOME</span><span class="k">:-</span><span class="nv">$HOME</span><span class="p">/.bash-my-aws</span><span class="si">}</span><span class="s2">/bin&quot;</span>
<span class="nb">source</span><span class="w"> </span><span class="si">${</span><span class="nv">BMA_HOME</span><span class="k">:-</span><span class="nv">$HOME</span><span class="p">/.bash-my-aws</span><span class="si">}</span>/aliases

<span class="c1"># For ZSH users, uncomment the following two lines:</span>
<span class="c1"># autoload -U +X compinit &amp;&amp; compinit</span>
<span class="c1"># autoload -U +X bashcompinit &amp;&amp; bashcompinit</span>

<span class="nb">source</span><span class="w"> </span><span class="si">${</span><span class="nv">BMA_HOME</span><span class="k">:-</span><span class="nv">$HOME</span><span class="p">/.bash-my-aws</span><span class="si">}</span>/bash_completion.sh
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Why use shell aliases?</p>
<p><code>Bash-my-AWS</code> began as a collection of bash functions, sourced into your shell.
More recently, the default suggestion has been to load aliases that execute a
small wrapper script that loads the functions and executes the desired function.</p>
<p>After years of <code>zsh</code> users asking for support, one stepped up and identified
a changes that would eliminate any shell compatibility problems without compromising
the functionaility, simplicity and discoverability of the project. Massive thanks
to <a href="https://github.com/ninth-dev">@ninth-dev</a> for this.</p>
</div>
<div class="codehilite"><pre><span></span><code><span class="w">        </span><span class="c1"># bash users may source the functions instead of loading the aliases</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-d<span class="w"> </span><span class="si">${</span><span class="nv">BMA_HOME</span><span class="k">:-</span><span class="nv">$HOME</span><span class="p">/.bash-my-aws</span><span class="si">}</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">          </span><span class="k">for</span><span class="w"> </span>f<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="si">${</span><span class="nv">BMA_HOME</span><span class="k">:-</span><span class="nv">$HOME</span><span class="p">/.bash-my-aws</span><span class="si">}</span>/lib/*-functions<span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nb">source</span><span class="w"> </span><span class="nv">$f</span><span class="p">;</span><span class="w"> </span><span class="k">done</span>
<span class="w">          </span><span class="k">for</span><span class="w"> </span>f<span class="w"> </span><span class="k">in</span><span class="w"> </span>~/.bash-my-aws/lib/*-functions<span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nb">source</span><span class="w"> </span><span class="nv">$f</span><span class="p">;</span><span class="w"> </span><span class="k">done</span>
<span class="w">        </span><span class="k">fi</span>
</code></pre></div>

<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<h3 id="running-commands">Running Commands<a class="headerlink" href="#running-commands" title="Permanent link">&para;</a></h3>
<p>The default way to run the commands is using the aliases:</p>
<div class="codehilite"><pre><span></span><code>$ instances
i-e6f097f6ea4457757  ami-123456789012  t3.nano  running  example-ec2-ap-southeast-2  2019-12-07T08:12:00.000Z  ap-southeast-2a  None
i-b983805b4b254f749  ami-123456789012  t3.nano  running  postfix-prod                2019-12-07T08:26:30.000Z  ap-southeast-2a  None
i-fed39ebe7204dfd37  ami-123456789012  t3.nano  running  postfix-prod                2019-12-07T08:26:34.000Z  ap-southeast-2a  None
i-47955eb46d98b4dd8  ami-123456789012  t3.nano  running  prometheus                  2019-12-07T08:27:02.000Z  ap-southeast-2a  None
i-8d25b78d40d17f38a  ami-123456789012  t3.nano  running  plex-server                 2019-12-07T08:27:38.000Z  ap-southeast-2a  None
</code></pre></div>

<p>It's also possible to run them using the <code>bma</code> wrapper.
(This is sometimes required when using a restrictive auth tool.)</p>
<div class="codehilite"><pre><span></span><code>$ bma instances
i-e6f097f6ea4457757  ami-123456789012  t3.nano  running  example-ec2-ap-southeast-2  2019-12-07T08:12:00.000Z  ap-southeast-2a  None
i-b983805b4b254f749  ami-123456789012  t3.nano  running  postfix-prod                2019-12-07T08:26:30.000Z  ap-southeast-2a  None
i-fed39ebe7204dfd37  ami-123456789012  t3.nano  running  postfix-prod                2019-12-07T08:26:34.000Z  ap-southeast-2a  None
i-47955eb46d98b4dd8  ami-123456789012  t3.nano  running  prometheus                  2019-12-07T08:27:02.000Z  ap-southeast-2a  None
i-8d25b78d40d17f38a  ami-123456789012  t3.nano  running  plex-server                 2019-12-07T08:27:38.000Z  ap-southeast-2a  None
</code></pre></div>

<h3 id="discovering-commands">Discovering Commands<a class="headerlink" href="#discovering-commands" title="Permanent link">&para;</a></h3>
<p>For each resource type, there is a command to list them:</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>instances
i-e6f097f6ea4457757<span class="w">  </span>ami-123456789012<span class="w">  </span>t3.nano<span class="w">  </span>running<span class="w">  </span>example-ec2-ap-southeast-2<span class="w">  </span><span class="m">2019</span>-12-07T08:12:00.000Z<span class="w">  </span>ap-southeast-2a<span class="w">  </span>None
i-b983805b4b254f749<span class="w">  </span>ami-123456789012<span class="w">  </span>t3.nano<span class="w">  </span>running<span class="w">  </span>postfix-prod<span class="w">                </span><span class="m">2019</span>-12-07T08:26:30.000Z<span class="w">  </span>ap-southeast-2a<span class="w">  </span>None
i-fed39ebe7204dfd37<span class="w">  </span>ami-123456789012<span class="w">  </span>t3.nano<span class="w">  </span>running<span class="w">  </span>postfix-prod<span class="w">                </span><span class="m">2019</span>-12-07T08:26:34.000Z<span class="w">  </span>ap-southeast-2a<span class="w">  </span>None
i-47955eb46d98b4dd8<span class="w">  </span>ami-123456789012<span class="w">  </span>t3.nano<span class="w">  </span>running<span class="w">  </span>prometheus<span class="w">                  </span><span class="m">2019</span>-12-07T08:27:02.000Z<span class="w">  </span>ap-southeast-2a<span class="w">  </span>None
i-8d25b78d40d17f38a<span class="w">  </span>ami-123456789012<span class="w">  </span>t3.nano<span class="w">  </span>running<span class="w">  </span>plex-server<span class="w">                 </span><span class="m">2019</span>-12-07T08:27:38.000Z<span class="w">  </span>ap-southeast-2a<span class="w">  </span>None
</code></pre></div>

<p>and a number of command to act on these resources:</p>
<div class="codehilite"><pre><span></span><code>$ instance-[TAB][TAB]
instance-asg          instance-ssh-details  instance-termination-protection
instance-az           instance-stack        instance-termination-protection-disable
instance-console      instance-start        instance-termination-protection-enable
instance-dns          instance-state        instance-type
instance-iam-profile  instance-stop         instance-userdata
instance-ip           instance-tags         instance-volumes
instance-ssh          instance-terminate    instance-vpc
</code></pre></div>

<p>Whether you're new to the tools or just have a bad memory, bash completion
makes discovering these commands simple.</p>
<div class="admonition note">
<p class="admonition-title">See the <a href="command-reference/">Command Reference</a> for a full list with usage examples</p>
</div>
<h3 id="piping-between-commands">Piping Between Commands<a class="headerlink" href="#piping-between-commands" title="Permanent link">&para;</a></h3>
<p>This is where the magic happens!</p>
<p>The first token on each line is almost always a resource identifier. When you pipe output
between the commands they just take the first token from each line.</p>
<div class="codehilite"><pre><span></span><code>$ instances | grep postfix | instance-ip
i-b983805b4b254f749  10.190.1.70    54.214.71.51
i-fed39ebe7204dfd37  10.135.204.82  54.214.26.190
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Most commands that list resources (<code>stacks</code>, <code>instances</code> , etc) accept
filter term as first arg. As well as reducing keystrokes, it can also
improve output as columnisation is done after filtering.</p>
<div class="codehilite"><pre><span></span><code>$ instances postfix | instance-ip
i-b983805b4b254f749  10.190.1.70    54.214.71.51
i-fed39ebe7204dfd37  10.135.204.82  54.214.26.190
</code></pre></div>

</div>
<h3 id="inspecting-commands">Inspecting Commands<a class="headerlink" href="#inspecting-commands" title="Permanent link">&para;</a></h3>
<p>For those interested in how it works:</p>
<ul>
<li>Each command is a bash function.</li>
<li>Most are <em>very</em> simple and wrap an AWSCLI command.</li>
</ul>
<p>For a quick look at how a command works, you can use <code>bma type</code>:</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>bma<span class="w"> </span><span class="nb">type</span><span class="w"> </span>instances
instances<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span><span class="k">function</span>
instances<span class="w"> </span><span class="o">()</span><span class="w"> </span>
<span class="o">{</span><span class="w"> </span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">instance_ids</span><span class="o">=</span><span class="k">$(</span>__bma_read_inputs<span class="k">)</span><span class="p">;</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">filters</span><span class="o">=</span><span class="k">$(</span>__bma_read_filters<span class="w"> </span><span class="nv">$@</span><span class="k">)</span><span class="p">;</span>
<span class="w">    </span>aws<span class="w"> </span>ec2<span class="w"> </span>describe-instances<span class="w"> </span><span class="k">$(</span><span class="o">[[</span><span class="w"> </span>-n<span class="w"> </span><span class="si">${</span><span class="nv">instance_ids</span><span class="si">}</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>--instance-ids<span class="w"> </span><span class="si">${</span><span class="nv">instance_ids</span><span class="si">}</span><span class="k">)</span><span class="w"> </span>--query<span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">      Reservations[].Instances[][</span>
<span class="s2">        InstanceId,</span>
<span class="s2">        ImageId,</span>
<span class="s2">        InstanceType,</span>
<span class="s2">        State.Name,</span>
<span class="s2">        [Tags[?Key==&#39;Name&#39;].Value][0][0],</span>
<span class="s2">        LaunchTime,</span>
<span class="s2">        Placement.AvailabilityZone,</span>
<span class="s2">        VpcId</span>
<span class="s2">      ]&quot;</span><span class="w"> </span>--output<span class="w"> </span>text<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-E<span class="w"> </span>--<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$filters</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">LC_ALL</span><span class="o">=</span>C<span class="w"> </span>sort<span class="w"> </span>-b<span class="w"> </span>-k<span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>column<span class="w"> </span>-s<span class="s1">&#39; &#39;</span><span class="w"> </span>-t
<span class="o">}</span>
</code></pre></div>

<p>A prettier version can be found in the source code:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># ~/.bash-my-aws/lib/instance-functions</span>
instances<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span><span class="nv">instance_ids</span><span class="o">=</span><span class="k">$(</span>__bma_read_inputs<span class="k">)</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span><span class="nv">filters</span><span class="o">=</span><span class="k">$(</span>__bma_read_filters<span class="w"> </span><span class="nv">$@</span><span class="k">)</span>

<span class="w">  </span>aws<span class="w"> </span>ec2<span class="w"> </span>describe-instances<span class="w">                                            </span><span class="se">\</span>
<span class="w">    </span><span class="k">$(</span><span class="o">[[</span><span class="w"> </span>-n<span class="w"> </span><span class="si">${</span><span class="nv">instance_ids</span><span class="si">}</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>--instance-ids<span class="w"> </span><span class="si">${</span><span class="nv">instance_ids</span><span class="si">}</span><span class="k">)</span><span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--query<span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">      Reservations[].Instances[][</span>
<span class="s2">        InstanceId,</span>
<span class="s2">        ImageId,</span>
<span class="s2">        InstanceType,</span>
<span class="s2">        State.Name,</span>
<span class="s2">        [Tags[?Key==&#39;Name&#39;].Value][0][0],</span>
<span class="s2">        LaunchTime,</span>
<span class="s2">        Placement.AvailabilityZone,</span>
<span class="s2">        VpcId</span>
<span class="s2">      ]&quot;</span><span class="w">                                                               </span><span class="se">\</span>
<span class="w">    </span>--output<span class="w"> </span>text<span class="w">       </span><span class="p">|</span>
<span class="w">  </span>grep<span class="w"> </span>-E<span class="w"> </span>--<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$filters</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span>
<span class="w">  </span><span class="nv">LC_ALL</span><span class="o">=</span>C<span class="w"> </span>sort<span class="w"> </span>-b<span class="w"> </span>-k<span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="p">|</span>
<span class="w">  </span>columnise
<span class="o">}</span>
</code></pre></div>

<p>For more info on AWSCLI query syntax, check out <a href="http://jmespath.org/tutorial.html">http://jmespath.org/tutorial.html</a></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.78eede0e.min.js"></script>
      
    
  </body>
</html>