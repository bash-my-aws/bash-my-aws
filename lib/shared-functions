#!/bin/bash
#
# internal-functions
#
# Used by bash-my-aws functions to work with stdin and arguments.

# XXX Check this simplification hard! Removed a lot
__bma_read_inputs() {
  # I'd like to move the $@ to the start
  # That way, we can use STDIN for resource identifiers only
  # Functions with that require arguments from $@ that aren't
  # resource identifiers can read and `shift` them off $@
  # before calling this function
  echo $(__bma_read_stdin) $@
}

# XXX Check this simplification hard! Removed a lot
__bma_read_stdin() {
  [[ -t 0 ]] || awk '{ print $1 }'
}

# Construct a string to be passed to `grep -E`
__bma_read_filters() {
  local IFS_SAVED="$IFS"; IFS=$'|'
  printf -- "$*"
  IFS=$IFS_SAVED
}

__bma_error() {
  echo "ERROR: $@" > /dev/stderr
  return 1
}

__bma_usage() {
  echo "USAGE: ${FUNCNAME[1]} $@" > /dev/stderr
}

## vim: ft=sh
