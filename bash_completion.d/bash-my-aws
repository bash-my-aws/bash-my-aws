_stack() {
    local command="$1"
    local word="$2"
    COMPREPLY=($(compgen -W "$(stack)" -- ${word}))
    return 0
}

_instance() {
    local command="$1"
    local word="$2"

    case $word in
      "") options="i-a i-b" ;;
      *)
        options=$(instance)
      ;;
    esac

    COMPREPLY=($(compgen -W "${options}" -- ${word}))
    return 0
}

_asg() {
    local command="$1"
    local word="$2"
    local options=$(asg)

    COMPREPLY=($(compgen -W "${options}" -- ${word}))
    return 0
}

complete -F _stack stack
complete -F _stack stack-delete
complete -F _stack stack-failure
complete -F _stack stack-parameters
complete -F _stack stack-resources
complete -F _stack stack-status
complete -F _stack stack-template

complete -F _instance instance
complete -F _instance instance-asg
complete -F _instance instance-console
complete -F _instance instance-dns
complete -F _instance instance-iam_profile
complete -F _instance instance-ip
complete -F _instance instance-ssh
complete -F _instance instance-ssh_details
complete -F _instance instance-stack
complete -F _instance instance-start
complete -F _instance instance-state
complete -F _instance instance-stop
complete -F _instance instance-terminate
complete -F _instance instance-type
complete -F _instance instance-userdata
complete -F _instance instance-volumes

complete -F _asg asg-capacity
complete -F _asg asg-instances
complete -F _asg asg-processes_suspended
complete -F _asg asg-resume
complete -F _asg asg-suspend

# vim: ft=sh
